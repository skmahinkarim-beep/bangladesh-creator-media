<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCM Admin Panel</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f0f2f5; margin: 0; }
        .container { max-width: 800px; margin: 20px auto; background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #333; }
        h3 { color: #0056b3; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-top: 30px; margin-bottom: 10px; }
        .size-guide { color: #d9534f; font-size: 0.85rem; font-weight: bold; margin-top: -5px; margin-bottom: 10px; display: block; }
        input, textarea, button { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        label { font-weight: bold; margin-top: 15px; display: block; color: #555; }
        .section { background: #f9f9f9; padding: 20px; margin-bottom: 25px; border-radius: 5px; border: 1px solid #e0e0e0; }
        .admin-stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        button { background: #0056b3; color: white; cursor: pointer; font-weight: bold; font-size: 1rem; border: none; }
        button:hover { background: #004494; }
        .logout-btn { background: #d9534f; margin-top: 20px; }
        .logout-btn:hover { background: #c9302c; }
        #admin-panel { display: none; }
        #login-section { max-width: 400px; margin: 50px auto; text-align: center; }
        .toggle-container { display: flex; align-items: center; gap: 10px; background: #fff; padding: 10px; border-radius: 5px; border: 1px solid #ddd; }
        .toggle-container input { width: auto; margin: 0; }
    </style>
</head>
<body>

    <div id="login-section" class="container">
        <h3>Admin Login</h3>
        <input type="email" id="email" placeholder="Admin Email">
        <input type="password" id="password" placeholder="Password">
        <button onclick="login()">Login</button>
    </div>

    <div id="admin-panel" class="container">
        <h1>Website Control Panel</h1>
        
        <div class="section" style="border-left: 5px solid #ff0000; background: #fff5f5;">
            <h3 style="margin-top: 0; color: #d32f2f;">üì¢ Breaking News Ticker</h3>
            <label>Scrolling Text:</label>
            <input type="text" id="breaking-news" placeholder="Write breaking news here...">
        </div>

        <div class="section">
            <h3>2. Top Full-Screen Banners</h3>
            <label>Banner 1:</label>
            <input type="text" id="b1-img" placeholder="Paste Image Link Here">
            <span class="size-guide">‚ÑπÔ∏è Recommended Size: 1920 x 600 px</span>
            <input type="text" id="b1-link" placeholder="Paste YouTube Link Here">

            <label>Banner 2:</label>
            <input type="text" id="b2-img" placeholder="Paste Image Link Here">
            <input type="text" id="b2-link" placeholder="Paste YouTube Link Here">

            <label>Banner 3:</label>
            <input type="text" id="b3-img" placeholder="Paste Image Link Here">
            <input type="text" id="b3-link" placeholder="Paste YouTube Link Here">
        </div>

        <div class="section">
            <h3>3. Video Grid (6 Items)</h3>
            <div id="video-inputs"></div>
        </div>

        <div class="section">
            <h3>4. Important Text Sections</h3>
            <input type="text" id="txt-title" placeholder="Title 1">
            <textarea id="txt-desc" rows="3" placeholder="Content 1..."></textarea>
            <input type="text" id="txt-title-2" placeholder="Title 2">
            <textarea id="txt-desc-2" rows="3" placeholder="Content 2..."></textarea>
            <input type="text" id="txt-title-3" placeholder="Title 3">
            <textarea id="txt-desc-3" rows="3" placeholder="Content 3..."></textarea>
        </div>

        <div class="section">
            <h3>5. Statistics (Numbers)</h3>
            <div class="admin-stat-grid">
                <div><label>Years Exp:</label><input type="text" id="s1-num"><input type="text" id="s1-lbl"></div>
                <div><label>Projects:</label><input type="text" id="s2-num"><input type="text" id="s2-lbl"></div>
                <div><label>Running:</label><input type="text" id="s3-num"><input type="text" id="s3-lbl"></div>
                <div><label>Satisfaction:</label><input type="text" id="s4-num"><input type="text" id="s4-lbl"></div>
            </div>
        </div>

        <!-- NEW: SIDE NOTICE SECTION -->
        <div class="section" style="border-left: 5px solid #0056b3; background: #eef6ff;">
            <h3>6. Side Notice (Appears after Ad)</h3>
            <div class="toggle-container">
                <input type="checkbox" id="notice-enabled"> 
                <label style="margin:0;">Show this notice to users?</label>
            </div>
            <label>Notice Text:</label>
            <textarea id="notice-text" rows="3" placeholder="Write your important notice here..."></textarea>
        </div>

        <button onclick="saveData()" style="padding: 15px; font-size: 1.2rem; background: #28a745;">SAVE ALL CHANGES</button>
        <button onclick="logout()" class="logout-btn">Logout</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAEfAusfGr5VAhwbfpEjWBZijX0k3v3vAA",
            authDomain: "bangladesh-creator-media.firebaseapp.com",
            projectId: "bangladesh-creator-media",
            storageBucket: "bangladesh-creator-media.firebasestorage.app",
            messagingSenderId: "261777783760",
            appId: "1:261777783760:web:9dcacf82fdca071f4b97d5"
        };

        if (!firebase.apps.length) { firebase.initializeApp(firebaseConfig); }
        const auth = firebase.auth();
        const db = firebase.firestore();

        const vidContainer = document.getElementById('video-inputs');
        for(let i=1; i<=6; i++) {
            vidContainer.innerHTML += `
                <div style="margin-top:10px; border-top:1px dashed #ccc; padding-top:10px;">
                    <strong>Video ${i}</strong>
                    <input type="text" id="v${i}-title" placeholder="Video Title">
                    <input type="text" id="v${i}-img" placeholder="Thumbnail Link">
                    <input type="text" id="v${i}-link" placeholder="YouTube Link">
                </div>
            `;
        }

        auth.onAuthStateChanged(user => {
            if(user) {
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
                loadData();
            } else {
                document.getElementById('login-section').style.display = 'block';
                document.getElementById('admin-panel').style.display = 'none';
            }
        });

        function login() {
            const e = document.getElementById('email').value;
            const p = document.getElementById('password').value;
            auth.signInWithEmailAndPassword(e, p).catch(err => alert("Error: " + err.message));
        }

        function logout() { auth.signOut(); }

        function saveData() {
            const data = {
                breakingNews: document.getElementById('breaking-news').value,
                banners: [
                    { img: document.getElementById('b1-img').value, link: document.getElementById('b1-link').value },
                    { img: document.getElementById('b2-img').value, link: document.getElementById('b2-link').value },
                    { img: document.getElementById('b3-img').value, link: document.getElementById('b3-link').value }
                ],
                videos: [],
                textSection: { title: document.getElementById('txt-title').value, desc: document.getElementById('txt-desc').value },
                textSection2: { title: document.getElementById('txt-title-2').value, desc: document.getElementById('txt-desc-2').value },
                textSection3: { title: document.getElementById('txt-title-3').value, desc: document.getElementById('txt-desc-3').value },
                stats: {
                    s1: { num: document.getElementById('s1-num').value, lbl: document.getElementById('s1-lbl').value },
                    s2: { num: document.getElementById('s2-num').value, lbl: document.getElementById('s2-lbl').value },
                    s3: { num: document.getElementById('s3-num').value, lbl: document.getElementById('s3-lbl').value },
                    s4: { num: document.getElementById('s4-num').value, lbl: document.getElementById('s4-lbl').value }
                },
                // Saving Notice Data
                sideNotice: {
                    enabled: document.getElementById('notice-enabled').checked,
                    text: document.getElementById('notice-text').value
                }
            };

            for(let i=1; i<=6; i++) {
                data.videos.push({
                    title: document.getElementById(`v${i}-title`).value,
                    img: document.getElementById(`v${i}-img`).value,
                    link: document.getElementById(`v${i}-link`).value
                });
            }

            db.collection('siteContent').doc('homePage').set(data)
                .then(() => alert('Website Updated Successfully!'))
                .catch(err => alert('Error: ' + err.message));
        }

        function loadData() {
            db.collection('siteContent').doc('homePage').get().then(doc => {
                if(doc.exists) {
                    const d = doc.data();
                    document.getElementById('breaking-news').value = d.breakingNews || '';
                    if(d.banners) {
                        d.banners.forEach((b, i) => {
                            if(i<3) {
                                document.getElementById(`b${i+1}-img`).value = b.img || '';
                                document.getElementById(`b${i+1}-link`).value = b.link || '';
                            }
                        });
                    }
                    if(d.videos) {
                        d.videos.forEach((v, index) => {
                            let i = index + 1;
                            if(i <= 6) {
                                document.getElementById(`v${i}-title`).value = v.title || '';
                                document.getElementById(`v${i}-img`).value = v.img || '';
                                document.getElementById(`v${i}-link`).value = v.link || '';
                            }
                        });
                    }
                    document.getElementById('txt-title').value = d.textSection?.title || '';
                    document.getElementById('txt-desc').value = d.textSection?.desc || '';
                    document.getElementById('txt-title-2').value = d.textSection2?.title || '';
                    document.getElementById('txt-desc-2').value = d.textSection2?.desc || '';
                    document.getElementById('txt-title-3').value = d.textSection3?.title || '';
                    document.getElementById('txt-desc-3').value = d.textSection3?.desc || '';

                    if(d.stats) {
                        document.getElementById('s1-num').value = d.stats.s1?.num || ''; document.getElementById('s1-lbl').value = d.stats.s1?.lbl || '';
                        document.getElementById('s2-num').value = d.stats.s2?.num || ''; document.getElementById('s2-lbl').value = d.stats.s2?.lbl || '';
                        document.getElementById('s3-num').value = d.stats.s3?.num || ''; document.getElementById('s3-lbl').value = d.stats.s3?.lbl || '';
                        document.getElementById('s4-num').value = d.stats.s4?.num || ''; document.getElementById('s4-lbl').value = d.stats.s4?.lbl || '';
                    }

                    // Load Side Notice
                    if(d.sideNotice) {
                        document.getElementById('notice-enabled').checked = d.sideNotice.enabled || false;
                        document.getElementById('notice-text').value = d.sideNotice.text || '';
                    }
                }
            });
        }
    </script>
</body>
</html>
